
This app is used to create a 'play by play' description of a basketball game using the BGDL file format
(as defined in BGDL.md in this repository).

It is a single-page web app with two screens: a Setup screen and a Game Data screen.


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SETUP SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

The user specifies the following information about a basketball game:

- Game Name (text)
- Date / Time (datetime-local input)
- Team A: name and jersey colour. A colour swatch preview updates as the colour is typed.
- Team B: name and jersey colour. A colour swatch preview updates as the colour is typed.
- Number of periods: dropdown of 2 and 4, default 4
- Period duration: dropdown of 8, 10, 12, 20 minutes, default 10
- Overtime duration: number input, default 5 minutes
- Video URL: accepts YouTube URLs, HLS (.m3u8), DASH (.mpd), .mp4, .mov, .webm.
  If a non-empty URL is entered that does not match any of those formats, a red warning
  label is shown below the field.
- Running Clock: checkbox, default false

Buttons:
- "Load": opens a file-picker for .bgdl files. Loads the file, populates all form fields from
  the header records, and populates AppState.events from any detail records in the file.
  Records the loaded filename as the last-used filename.
- "Save": saves the current header fields (plus any existing events) as a .bgdl file using the
  File System Access API (with a download fallback). The suggested filename is derived from the
  game name. Records the saved filename as the last-used filename.
- "Events": switches to the Game Data screen. Disabled (greyed out) until all of the following
  are filled in: Game Name, Team A Name, Team B Name, and a recognised Video URL. If any of
  these are missing or the URL is not recognised, the button remains inactive.


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
GAME DATA SCREEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Layout (top to bottom, CSS Grid):
1. Game Info Bar
2. Game Clock Bar
3. Video area (fills remaining height, 85% screen width, centred)
4. Seek bar (aligned under the video)
5. Playback controls
6. Data Entry section (max 32vh)

â”€â”€ Game Info Bar â”€â”€
Shows: game name, date, Team A badge, "vs", Team B badge.
Buttons on the right:
- "ğŸ’¾ Save": saves the complete .bgdl file (header + all events). The save dialog is
  pre-filled with the last filename used on the Setup screen (load or save), falling back
  to a name derived from the game name if no file has been used yet.
- "â† Setup": returns to the Setup screen.

â”€â”€ Game Clock Bar â”€â”€
Shows the current computed game clock (e.g. "P1 Â· 09:43") and a mode indicator badge
("Playback" in blue, or "Record Entry" in red).

The game clock is derived from the event list using BGDL START, STOP, and SYNC events.
START events begin the clock countdown; STOP and SYNC events halt it. Events with an
explicit game clock field (e.g. P1T09:15) act as authoritative sync points.
While the video is playing, the clock updates continuously via requestAnimationFrame.

â”€â”€ Video â”€â”€
Displayed via Video.js 8.x with the videojs-youtube plugin. Supported sources:
YouTube URLs, HLS (.m3u8), DASH (.mpd), MP4, MOV, WebM.
Native Video.js controls are hidden; keyboard shortcuts are disabled so the app can
handle all keyboard input itself.

â”€â”€ Seek Bar â”€â”€
A range input (0â€“1000) mapped to the video duration. Dragging seeks the video.
Spacebar on the seekbar does not trigger mode changes.

â”€â”€ Playback Controls â”€â”€
- Play/Pause button (â–¶ / â¸)
- Jump back: Â«30s, Â«5s
- Jump forward: 5sÂ», 30sÂ»
- Speed buttons: Â¼Ã—, 1Ã—, 1.5Ã—, 2Ã—
- Elapsed / remaining time display

â”€â”€ Data Entry Section â”€â”€
A fixed 15-row table (7 past + 1 current + 7 future) showing a sliding window of
event records centred on the current video playback time.
Columns: Time Tag | Event Data | Description
The record count is shown in the section heading.

Rows that correspond to a real event record have a pointer cursor and a hover highlight.
In Playback mode, clicking such a row seeks the video to that event's wall clock time.


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PLAYBACK MODE  (default)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

- The video plays/pauses with the play/pause button or via the playback controls.
- Left/Right arrow keys seek Â±5 seconds.
- Clicking an event row seeks the video to that event's wall clock time.
- The sliding event window and game clock update continuously as the video plays.
- Pressing Space pauses the video and switches to Record Entry mode.


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
RECORD ENTRY MODE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Entered by pressing Space in Playback mode. The video is paused.

The current (centre) row of the event table becomes editable, showing two text inputs:
- Time Tag input: pre-filled with a BGDL time tag consisting of the current wall clock
  (2 decimal places) and the computed game clock (e.g. "03:17.42 P1T09:15").
  If an existing event record matches the current playback time within 0.01 seconds,
  that record is loaded into both inputs for editing instead.
- Event Data input: the BGDL event data field (e.g. "2pt +A5 @RM").
  The Description column updates live with every keystroke.

Tab switches focus between the Time Tag and Event Data inputs.

Keys while in Record Entry mode:
- Enter/Return: saves the record. If editing an existing record, it is replaced in-place.
  If entering a new record, it is inserted into the event list in wall-clock order.
  After saving, the mode returns to Playback and the video resumes playing.
- Escape: discards any changes, returns to Playback mode, and resumes the video.
- Up arrow: navigates to the previous existing event record (earlier wall clock).
  The video seeks to that event's wall clock time. Stops at the first record.
- Down arrow: navigates to the next existing event record (later wall clock).
  The video seeks to that event's wall clock time. Stops at the last record.
  If currently on a new (unsaved) record, Down navigates to the first existing event.
  Navigating away without pressing Enter discards any unsaved text.


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FILE FORMAT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Files use the .bgdl extension (plain text). See BGDL.md for the full specification.

Header tags written/read:
  GAME, DATE, VIDEO, PERIODS (e.g. 4x10+5), A (team A name,colour),
  B (team B name,colour), RUNNINGCLOCK

Detail records follow the header, one per line, in wall-clock order.
Each record: <wallclock> [<gameclock>] <eventType> [<eventData>]
Example: 03:17.42 P1T09:15 2pt +A5 @RM


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
TECHNICAL NOTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

- No build system. Plain HTML/CSS/JS served from the project root.
- Video.js 8.10.0 and videojs-youtube loaded from CDN.
- Cache busting via ?v=N query strings on all local asset URLs; increment N on each change.
- window.AppState = { header, events, lastFilename } shared between setup.js and gamedata.js.
- File System Access API used for save dialogs where available; download-link fallback otherwise.
